<html>
      <head>
        <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1,user-scalable=no" />
        <meta charset="utf-8">
        <meta name="referrer" content="never">
        <title> 安卓自定义View基础 - 颜色 | 浩浩的博客</title>
        <link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.11.1/katex.min.css">
        <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://fqzhanghao.github.io//styles/main.css">
          <script src="https://fqzhanghao.github.io//media/scripts/mdui.min.js"></script>
        <link rel="stylesheet" href="https://at.alicdn.com/t/font_1306644_jwtuc2zzbrd.css">
        <link href="https://fonts.googleapis.com/css?family=Dancing+Script|Ma+Shan+Zheng&display=swap" rel="stylesheet">
        <script src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
        <script src="https://fqzhanghao.github.io//media/scripts/script.js"></script>
        <script >hljs.initHighlightingOnLoad();</script>
        

    </head>
    <body class="mdui-theme-primary-purple mdui-theme-accent-purple">
        <header class="index-img mdui-m-b-3" >
                          <button class="mdui-btn  mdui-btn-icon mdui-btn-dense mdui-color-theme-500 mdui-ripple yinying mdui-m-t-1 mdui-m-l-1" mdui-menu="{target: '#demo-attr-cascade'}"><i class="mdui-icon material-icons">&#xe5d2;</i></button>
                <ul class="mdui-menu" id="demo-attr-cascade">
                
                        <li class="mdui-menu-item">
                          <a href="/" class="mdui-ripple">首页</a>
                        </li>
                
                        <li class="mdui-menu-item">
                          <a href="/archives" class="mdui-ripple">归档</a>
                        </li>
                
                        <li class="mdui-menu-item">
                          <a href="/post/about" class="mdui-ripple">关于</a>
                        </li>
                
                      </ul>

        </header>
        <div class="mdui-container post">
                <div class="mdui-row">
                        <div class="mdui-col-md-8 mdui-col-offset-md-2 ">
                         <article class="mdui-shadow-10 mdui-p-a-2 post-list">
                           <div class="mdui-typo-display-1 mdui-m-b-3"> 安卓自定义View基础 - 颜色</div>
                           <a  class="index-list-biaoqian ">2020-01-19</a>
                           <div class="mdui-typo mdui-m-t-3 post-neirong"><p>简要介绍安卓中的颜色相关内容，包括颜色的定义，创建颜色的几种方式，以及颜色的混合模式等。</p>
<!--more-->
<h1 id="一简单介绍颜色">一.简单介绍颜色</h1>
<p>安卓支持的颜色模式：</p>
<table>
<thead>
<tr>
<th>颜色模式</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>ARGB8888</td>
<td>四通道高精度(32位)</td>
</tr>
<tr>
<td>ARGB4444</td>
<td>四通道低精度(16位)</td>
</tr>
<tr>
<td>RGB565</td>
<td>屏幕默认模式(16位)</td>
</tr>
<tr>
<td>Alpha8</td>
<td>仅有透明通道(8位)</td>
</tr>
</tbody>
</table>
<p>PS：其中字母表示通道类型，数值表示该类型用多少位二进制来描述。如ARGB8888则表示有四个通道(ARGB),每个对应的通道均用8位来描述。</p>
<p>注意：我们常用的是ARGB8888和ARGB4444，而在所有的安卓设备屏幕上默认的模式都是RGB565,请留意这一点。</p>
<h3 id="以argb8888为例介绍颜色定义">以ARGB8888为例介绍颜色定义:</h3>
<table>
<thead>
<tr>
<th>类型</th>
<th>解释</th>
<th>0(0x00)</th>
<th>255(0xff)</th>
</tr>
</thead>
<tbody>
<tr>
<td>A(Alpha)</td>
<td>透明度</td>
<td>透明</td>
<td>不透明</td>
</tr>
<tr>
<td>R(Red)</td>
<td>红色</td>
<td>无色</td>
<td>红色</td>
</tr>
<tr>
<td>G(Green)</td>
<td>绿色</td>
<td>无色</td>
<td>绿色</td>
</tr>
<tr>
<td>B(Blue)</td>
<td>蓝色</td>
<td>无色</td>
<td>蓝色</td>
</tr>
</tbody>
</table>
<p>其中 A R G B 的取值范围均为0<sub>255(即16进制的0x00</sub>0xff)</p>
<p>A 从ox00到oxff表示从透明到不透明。</p>
<p>RGB 从0x00到0xff表示颜色从浅到深。</p>
<p>当RGB全取最小值(0或0x000000)时颜色为黑色，全取最大值(255或0xffffff)时颜色为白色</p>
<h1 id="二几种创建或使用颜色的方式">二.几种创建或使用颜色的方式</h1>
<h3 id="1java中定义颜色">1.java中定义颜色</h3>
<pre><code class="language-java">int color = Color.GRAY;     //灰色
</code></pre>
<p>由于Color类提供的颜色仅为有限的几个，通常还是用ARGB值进行表示。</p>
<pre><code class="language-java">int color = Color.argb(127, 255, 0, 0);   //半透明红色

int color = 0xaaff0000;                   //带有透明度的红色
</code></pre>
<h3 id="2在xml文件中定义颜色">2.在xml文件中定义颜色</h3>
<p>在/res/values/color.xml 文件中如下定义：</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;resources&gt;
    &lt;color name=&quot;red&quot;&gt;#ff0000&lt;/color&gt;
    &lt;color name=&quot;green&quot;&gt;#00ff00&lt;/color&gt;
&lt;/resources&gt;
</code></pre>
<p>详解： 在以上xml文件中定义了两个颜色，红色和蓝色，是没有alpha（透明）通道的。</p>
<p>定义颜色以‘#’开头，后面跟十六进制的值，有如下几种定义方式：</p>
<pre><code class="language-xml">#f00            //低精度 - 不带透明通道红色
#af00           //低精度 - 带透明通道红色

#ff0000         //高精度 - 不带透明通道红色
#aaff0000       //高精度 - 带透明通道红色
</code></pre>
<h3 id="3在java文件中引用xml中定义的颜色">3.在java文件中引用xml中定义的颜色：</h3>
<pre><code class="language-java">int color = getResources().getColor(R.color.mycolor);
</code></pre>
<h3 id="4在xml文件layout或style中引用或者创建颜色">4.在xml文件(layout或style)中引用或者创建颜色</h3>
<pre><code class="language-xml">&lt;!--在style文件中引用--&gt;
&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;
    &lt;item name=&quot;colorPrimary&quot;&gt;@color/red&lt;/item&gt;
&lt;/style&gt;
</code></pre>
<pre><code class="language-xml">android:background=&quot;@color/red&quot;     //引用在/res/values/color.xml 中定义的颜色

android:background=&quot;#ff0000&quot;        //创建并使用颜色
</code></pre>
<h1 id="三取色工具">三.取色工具</h1>
<p>颜色都是用RGB值定义的，而我们一般是无法直观的知道自己需要颜色的值，需要借用取色工具直接从图片或者其他地方获取颜色的RGB值。</p>
<h3 id="1colorpixfor-win">1.ColorPix(for Win)</h3>
<p>简单的取色调色工具，可以从屏幕取色，非常小而精简。</p>
<p><a href="http://www.colorschemer.com/ColorPix.exe" title="点击这里下载ColorPix">http://www.colorschemer.com/ColorPix.exe</a></p>
<h3 id="2picpickfor-win">2.Picpick(for Win)</h3>
<p>功能更加强大的工具：PicPick。</p>
<p>PicPick具备了截取全屏、活动窗口、指定区域、固定区域、手绘区域功能，支持滚动截屏，屏幕取色，支持双显示器，具备白板、屏幕标尺、直角座标或极座标显示与测量，具备强大的图像编辑和标注功能。</p>
<p><a href="http://ngwin.com/picpick">http://ngwin.com/picpick</a></p>
<h3 id="3sipfor-mac">3.Sip(for Mac)</h3>
<p>Sip作为Mac上的取色工具，也是十分优秀的，除了屏幕取色外还配备了不同类型的调色板，并且支持将颜色格式化为任何常用的格式。</p>
<p><a href="https://itunes.apple.com/us/app/sip/id507257563?mt=12">https://itunes.apple.com/us/app/sip/id507257563?mt=12</a></p>
<h1 id="四颜色混合模式alpha通道相关">四.颜色混合模式(Alpha通道相关)</h1>
<p>过前面介绍我们知道颜色一般都是四个通道(ARGB)的，其中(RGB)控制的是颜色,而A(Alpha)控制的是透明度。</p>
<p>因为我们的显示屏是没法透明的，因此最终显示在屏幕上的颜色里可以认为没有Alpha通道。Alpha通道主要在两个图像混合的时候生效。</p>
<p>默认情况下，当一个颜色绘制到Canvas上时的混合模式是这样计算的：</p>
<p>(RGB通道) 最终颜色 = 绘制的颜色 + (1 - 绘制颜色的透明度) × Canvas上的原有颜色。</p>
<p>注意：</p>
<p>1.这里我们一般把每个通道的取值从0(ox00)到255(0xff)映射到0到1的浮点数表示。</p>
<p>2.这里等式右边的“绘制的颜色”、“Canvas上的原有颜色” 都是经过预乘了自己的Alpha通道的值。如绘制颜色：0x88ffffff，那么参与运算时的每个颜色通道的值不是1.0，而是(1.0 * 0.5333 = 0.5333)。 (其中0.5333 = 0x88/0xff)</p>
<p>使用这种方式的混合，就会造成后绘制的内容以半透明的方式叠在上面的视觉效果。</p>
<p>其实还可以有不同的混合模式供我们选择，用Paint.setXfermode，指定不同的PorterDuff.Mode。</p>
<p>下表是各个PorterDuff模式的混合计算公式：（D指原本在Canvas上的内容dst，S指绘制输入的内容src，a指alpha通道，c指RGB各个通道）</p>
<table>
<thead>
<tr>
<th>混合模式</th>
<th style="text-align:left">计算公式</th>
</tr>
</thead>
<tbody>
<tr>
<td>ADD</td>
<td style="text-align:left">Saturate(S + D)</td>
</tr>
<tr>
<td>CLEAR</td>
<td style="text-align:left">[0, 0]</td>
</tr>
<tr>
<td>DARKEN</td>
<td style="text-align:left">[Sa + Da - SaDa, Sc(1 - Da) + Dc*(1 - Sa) + min(Sc, Dc)]</td>
</tr>
<tr>
<td>DST</td>
<td style="text-align:left">[Da, Dc]</td>
</tr>
<tr>
<td>DST_ATOP</td>
<td style="text-align:left">[Sa, Sa * Dc + Sc * (1 - Da)]</td>
</tr>
<tr>
<td>DST_IN</td>
<td style="text-align:left">[Sa * Da, Sa * Dc]</td>
</tr>
<tr>
<td>DST_OUT</td>
<td style="text-align:left">[Da * (1 - Sa), Dc * (1 - Sa)]</td>
</tr>
<tr>
<td>DST_OVER</td>
<td style="text-align:left">[Sa + (1 - Sa)Da, Rc = Dc + (1 - Da)Sc]</td>
</tr>
<tr>
<td>LIGHTEN</td>
<td style="text-align:left">[Sa + Da - SaDa, Sc(1 - Da) + Dc*(1 - Sa) + max(Sc, Dc)]</td>
</tr>
<tr>
<td>MULTIPLY</td>
<td style="text-align:left">[Sa * Da, Sc * Dc]</td>
</tr>
<tr>
<td>SCREEN</td>
<td style="text-align:left">[Sa + Da - Sa * Da, Sc + Dc - Sc * Dc]</td>
</tr>
<tr>
<td>SRC</td>
<td style="text-align:left">[Sa, Sc]</td>
</tr>
<tr>
<td>SRC_ATOP</td>
<td style="text-align:left">[Da, Sc * Da + (1 - Sa) * Dc]</td>
</tr>
<tr>
<td>SRC_IN</td>
<td style="text-align:left">[Sa * Da, Sc * Da]</td>
</tr>
<tr>
<td>SRC_OUT</td>
<td style="text-align:left">[Sa * (1 - Da), Sc * (1 - Da)]</td>
</tr>
<tr>
<td>SRC_OVER</td>
<td style="text-align:left">[Sa + (1 - Sa)Da, Rc = Sc + (1 - Sa)Dc]</td>
</tr>
<tr>
<td>XOR</td>
<td style="text-align:left">[Sa + Da - 2 * Sa * Da, Sc * (1 - Da) + (1 - Sa) * Dc]</td>
</tr>
</tbody>
</table>
<p>用示例图来查看使用不同模式时的混合效果如下（src表示输入的图，dst表示原Canvas上的内容）：</p>
<figure data-type="image" tabindex="1"><img src="http://ww4.sinaimg.cn/large/005Xtdi2gw1f1wa0f0mzjj30hh0fsjt8.jpg" alt="" loading="lazy"></figure>
<h1 id="五参考资料">五.参考资料</h1>
<ul>
<li><a href="http://www.cnblogs.com/zhucai/p/android-graphics-animation.html">安卓图形动画</a></li>
</ul>
</div>
                              <div class="mdui-divider mdui-m-t-3"></div>
                              <div class="mdui-row-xs-2 mdui-m-t-2">
  <div class="mdui-col"> <div class="mdui-text-left"><a href="https://fqzhanghao.github.io/post/an-zhuo-zi-ding-yi-view-jin-jie-canvas-zhi-hui-zhi-tu-xing">安卓自定义View进阶-Canvas之绘制图形</a></div></div>
 <div class="mdui-col"><div class="mdui-text-right "><a href="https://fqzhanghao.github.io/post/an-zhuo-zi-ding-yi-view-ji-chu-jiao-du-hu-du">安卓自定义View基础 - 角度弧度</a></div> </div>
                                </div>
                                <div class="mdui-divider mdui-m-t-2"></div>
   
 <script src="https://fqzhanghao.github.io//media/scripts/Valine.min.js"></script>
 <div class="comment"></div>

<script>
      new Valine({
            el: '.comment',



            path: window.location.pathname,
            pageSize: 30,
            avatar:'mm', 
       })

    </script> 
<script>
    if(window.location.hash){
        var checkExist = setInterval(function() {
           if ($(window.location.hash).length) {
              $('html, body').animate({scrollTop: $(window.location.hash).offset().top-90}, 1000);
              clearInterval(checkExist);
           }
        }, 100);
    }
</script>
                         </article>
                 <div class="toc-container mdui-float-right">
                <ul class="markdownIt-TOC">
<li><a href="#%E4%B8%80%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D%E9%A2%9C%E8%89%B2">一.简单介绍颜色</a><br>
*
<ul>
<li><a href="#%E4%BB%A5argb8888%E4%B8%BA%E4%BE%8B%E4%BB%8B%E7%BB%8D%E9%A2%9C%E8%89%B2%E5%AE%9A%E4%B9%89">以ARGB8888为例介绍颜色定义:</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8C%E5%87%A0%E7%A7%8D%E5%88%9B%E5%BB%BA%E6%88%96%E4%BD%BF%E7%94%A8%E9%A2%9C%E8%89%B2%E7%9A%84%E6%96%B9%E5%BC%8F">二.几种创建或使用颜色的方式</a><br>
*
<ul>
<li><a href="#1java%E4%B8%AD%E5%AE%9A%E4%B9%89%E9%A2%9C%E8%89%B2">1.java中定义颜色</a></li>
<li><a href="#2%E5%9C%A8xml%E6%96%87%E4%BB%B6%E4%B8%AD%E5%AE%9A%E4%B9%89%E9%A2%9C%E8%89%B2">2.在xml文件中定义颜色</a></li>
<li><a href="#3%E5%9C%A8java%E6%96%87%E4%BB%B6%E4%B8%AD%E5%BC%95%E7%94%A8xml%E4%B8%AD%E5%AE%9A%E4%B9%89%E7%9A%84%E9%A2%9C%E8%89%B2">3.在java文件中引用xml中定义的颜色：</a></li>
<li><a href="#4%E5%9C%A8xml%E6%96%87%E4%BB%B6layout%E6%88%96style%E4%B8%AD%E5%BC%95%E7%94%A8%E6%88%96%E8%80%85%E5%88%9B%E5%BB%BA%E9%A2%9C%E8%89%B2">4.在xml文件(layout或style)中引用或者创建颜色</a></li>
</ul>
</li>
<li><a href="#%E4%B8%89%E5%8F%96%E8%89%B2%E5%B7%A5%E5%85%B7">三.取色工具</a><br>
*
<ul>
<li><a href="#1colorpixfor-win">1.ColorPix(for Win)</a></li>
<li><a href="#2picpickfor-win">2.Picpick(for Win)</a></li>
<li><a href="#3sipfor-mac">3.Sip(for Mac)</a></li>
</ul>
</li>
<li><a href="#%E5%9B%9B%E9%A2%9C%E8%89%B2%E6%B7%B7%E5%90%88%E6%A8%A1%E5%BC%8Falpha%E9%80%9A%E9%81%93%E7%9B%B8%E5%85%B3">四.颜色混合模式(Alpha通道相关)</a></li>
<li><a href="#%E4%BA%94%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">五.参考资料</a></li>
</ul>

              </div>

                        </div>
                 </div>
          
        </div>
        <script data-no-instant>
    (function ($) {
        $.extend({
            adamsOverload: function () {
                $.viewImage({
                    'target'  : '.post-neirong img',
                    'exclude' : '.vsmile-icons img , .song-links-item img',
                    'delay'   : 300
                });
            }
        });
    })(jQuery);
    jQuery.adamsOverload();
</script>
        <footer class="footer mdui-m-t-5 mdui-text-center">
               <nav class="social-links">
                      <ul>
                      
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                      </ul>
                    </nav>
                  <div class="copyright">
                      <p>Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a></p>
                  </div>
              </footer>
    </body>
</html>