<html>
      <head>
        <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1,user-scalable=no" />
        <meta charset="utf-8">
        <meta name="referrer" content="never">
        <title>服务器搭建aira2和webui | 浩浩的博客</title>
        <link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.11.1/katex.min.css">
        <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://fqzhanghao.github.io//styles/main.css">
          <script src="https://fqzhanghao.github.io//media/scripts/mdui.min.js"></script>
        <link rel="stylesheet" href="https://at.alicdn.com/t/font_1306644_jwtuc2zzbrd.css">
        <link href="https://fonts.googleapis.com/css?family=Dancing+Script|Ma+Shan+Zheng&display=swap" rel="stylesheet">
        <script src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
        <script src="https://fqzhanghao.github.io//media/scripts/script.js"></script>
        <script >hljs.initHighlightingOnLoad();</script>
        

    </head>
    <body class="mdui-theme-primary-purple mdui-theme-accent-purple">
        <header class="index-img mdui-m-b-3" >
                          <button class="mdui-btn  mdui-btn-icon mdui-btn-dense mdui-color-theme-500 mdui-ripple yinying mdui-m-t-1 mdui-m-l-1" mdui-menu="{target: '#demo-attr-cascade'}"><i class="mdui-icon material-icons">&#xe5d2;</i></button>
                <ul class="mdui-menu" id="demo-attr-cascade">
                
                        <li class="mdui-menu-item">
                          <a href="/" class="mdui-ripple">首页</a>
                        </li>
                
                        <li class="mdui-menu-item">
                          <a href="/archives" class="mdui-ripple">归档</a>
                        </li>
                
                        <li class="mdui-menu-item">
                          <a href="/post/about" class="mdui-ripple">关于</a>
                        </li>
                
                      </ul>

        </header>
        <div class="mdui-container post">
                <div class="mdui-row">
                        <div class="mdui-col-md-8 mdui-col-offset-md-2 ">
                         <article class="mdui-shadow-10 mdui-p-a-2 post-list">
                           <div class="mdui-typo-display-1 mdui-m-b-3">服务器搭建aira2和webui</div>
                           <a  class="index-list-biaoqian ">2019-05-23</a>
                           <div class="mdui-typo mdui-m-t-3 post-neirong"><p>新买的服务器安装下载服务器</p>
<!-- more-->
<h3 id="基础软件的安装">基础软件的安装</h3>
<p>在下载Aria2之前先安装一些基础必备的软件：git、screen、nodejs</p>
<blockquote>
<p>sudo apt-get install git screen nodejs</p>
</blockquote>
<p>如果有些软件已经安装过了就不用再安装</p>
<h3 id="在命令行中安装aria2">在命令行中安装aria2</h3>
<p>在Ubuntu 18.04操作系统命令行中运行以下命令：</p>
<blockquote>
<p>sudo apt-get install aria2</p>
</blockquote>
<p>以下是安装aria2后的一些基本常识：</p>
<pre><code>sudo mkdir /etc/aria2　#新建文件夹 

sudo touch /etc/aria2/aria2.session　#新建session文件

sudo chmod 777 /etc/aria2/aria2.session　#设置aria2.session可写 

sudo vi /etc/aria2/aria2.conf　#创建配置文件
</code></pre>
<h3 id="aria2conf文件配置">aria2.conf文件配置</h3>
<pre><code>dir=/home/ye/download

disable-ipv6=true

#打开rpc的目的是为了给web管理端用

enable-rpc=true

rpc-allow-origin-all=true

rpc-listen-all=true

#rpc-listen-port=6800

#断点续传

continue=true

input-file=/etc/aria2/aria2.session

save-session=/etc/aria2/aria2.session

#最大同时下载任务数

max-concurrent-downloads=20

save-session-interval=120

# Http/FTP 相关

connect-timeout=120

#lowest-speed-limit=10K

#同服务器连接数

max-connection-per-server=10

#max-file-not-found=2

#最小文件分片大小, 下载线程数上限取决于能分出多少片, 对于小文件重要

min-split-size=10M

#单文件最大线程数, 路由建议值: 5

split=10

check-certificate=false

#http-no-cache=true
</code></pre>
<h3 id="下载aria2webui">下载Aria2WebUI</h3>
<p>首先切换到用户目录下</p>
<blockquote>
<p>cd /home/ye</p>
</blockquote>
<p>同样也是一行命令：</p>
<blockquote>
<p>git clone https://github.com/ziahamza/webui-aria2.git</p>
</blockquote>
<p>下载完之后会在当前目录下创建一个webui-aria2目录。</p>
<h3 id="设置aria2监听rpc启动webui">设置Aria2监听rpc，启动WebUI</h3>
<blockquote>
<p>screen -S aria2</p>
</blockquote>
<p>新建一个名为aria2的会话</p>
<p><strong>注意那个S是大写！S是大写！S是大写！</strong></p>
<p>在新的会话中输入：</p>
<pre><code class="language-undefined">aria2c --conf-path=/etc/aria2/aria2.conf --enable-rpc --rpc-listen-all --rpc-secret xxxxxxx
</code></pre>
<p>注意：参数–rpc-secret 后面的字符串是自己自定义的token密码，要记住！要记住！要记住！</p>
<p>执行后会显示：</p>
<pre><code class="language-undefined">root@ubuntu:~# aria2c --conf-path=/etc/aria2/aria2.conf --enable-rpc --rpc-listen-all --rpc-secret xxxxxxx

08/01 15:42:28 [NOTICE] IPv4 RPC: listening on TCP port 6800

08/01 15:42:28 [NOTICE] IPv6 RPC: listening on TCP port 6800root@ubuntu:~# aria2c --enable-rpc --rpc-listen-all --rpc-secret asdfghjkl

08/01 15:42:28 [NOTICE] IPv4 RPC: listening on TCP port 6800

08/01 15:42:28 [NOTICE] IPv6 RPC: listening on TCP port 6800
</code></pre>
<p>记住port后面的端口号“6800”</p>
<p>然后依次按下键盘的ctrl、A、D 这三个键，回到前一个会话，输入</p>
<pre><code class="language-undefined">screen -S webui
</code></pre>
<p>新建一个名为webui的会话</p>
<p>在新的会话中，先跳转到上面说的webui-aria2目录中，再输入启动命令</p>
<pre><code>cd /home/ye/webui-aria2
node node-server.js
</code></pre>
<p>显示如下:</p>
<pre><code class="language-undefined">root@ubuntu:~/webui-aria2# node node-server.js
WebUI Aria2 Server is running on http://localhost:8888
</code></pre>
<p>出现<code>WebUI Aria2 Server is running on http://localhost:8888</code>说明WebUI已经启动成功，访问 http://YourIP:8888 即可进入Web界面</p>
<p>还是依次按下键盘的ctrl、A、D 这三个键，回到前一个会话，如果是用ssh客户端（如Putty）登陆的会话，这个时候就可以关闭这个会话了。</p>
<h3 id="进入webui界面通过rpc接口连接aria2">进入WebUI界面，通过rpc接口连接Aria2</h3>
<p>如果你是在有公网ip的vps上搭建的，访问“公网ip:8888/”就行了。</p>
<p>进入WebUI界面后可能会提示</p>
<pre><code class="language-undefined">糟糕！ 连接到 Aria2 RPC 服务器时认证失败，将在10秒后重试。
您可能需要确认您的身份验证信息，请前往 设置 &gt; 连接设置
</code></pre>
<p>这个时候在设置&gt;连接设置里设置一下RPC服务</p>
<p>主机后面填写Aria2服务所在的主机的ip，端口就是第四步中启动Aria2 监听RPC的端口6800，密码令牌就是参数**–rpc-secret 后面的字符串，**第四步中让你记住的那个。这三个填完点最下面的“保存连接配置”即可。只要配置填对了就能连接到Aria2了</p>
<p>教程到此结束了,其余的设置可参考下面的链接,里面有具体的用法和具体含义</p>
<h3 id="参考链接">参考链接:</h3>
<p><a href="https://blog.sunriseydy.top/technology/server-blog/server/zaiubuntushangyongaria2hearia2webuishixianyuanchengduoxianchengxiazai/">ubuntu上安装aria2及webui</a></p>
<p><a href="https://ywnz.com/linuxjc/2686.html">在Ubuntu 18.04系统下安装配置和使用aria2</a></p>
</div>
                              <div class="mdui-divider mdui-m-t-3"></div>
                              <div class="mdui-row-xs-2 mdui-m-t-2">
  <div class="mdui-col"> <div class="mdui-text-left"><a href="https://fqzhanghao.github.io/post/v2ray-websocket-shi-xian-wai-wang-fang-wen">V2Ray WebSocket实现外网访问</a></div></div>
 <div class="mdui-col"><div class="mdui-text-right "><a href="https://fqzhanghao.github.io/post/fu-wu-qi-da-jian-ftp">服务器搭建ftp</a></div> </div>
                                </div>
                                <div class="mdui-divider mdui-m-t-2"></div>
   
 <script src="https://fqzhanghao.github.io//media/scripts/Valine.min.js"></script>
 <div class="comment"></div>

<script>
      new Valine({
            el: '.comment',



            path: window.location.pathname,
            pageSize: 30,
            avatar:'mm', 
       })

    </script> 
<script>
    if(window.location.hash){
        var checkExist = setInterval(function() {
           if ($(window.location.hash).length) {
              $('html, body').animate({scrollTop: $(window.location.hash).offset().top-90}, 1000);
              clearInterval(checkExist);
           }
        }, 100);
    }
</script>
                         </article>
                 <div class="toc-container mdui-float-right">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li><a href="#%E5%9F%BA%E7%A1%80%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%AE%89%E8%A3%85">基础软件的安装</a></li>
<li><a href="#%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%AD%E5%AE%89%E8%A3%85aria2">在命令行中安装aria2</a></li>
<li><a href="#aria2conf%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE">aria2.conf文件配置</a></li>
<li><a href="#%E4%B8%8B%E8%BD%BDaria2webui">下载Aria2WebUI</a></li>
<li><a href="#%E8%AE%BE%E7%BD%AEaria2%E7%9B%91%E5%90%ACrpc%E5%90%AF%E5%8A%A8webui">设置Aria2监听rpc，启动WebUI</a></li>
<li><a href="#%E8%BF%9B%E5%85%A5webui%E7%95%8C%E9%9D%A2%E9%80%9A%E8%BF%87rpc%E6%8E%A5%E5%8F%A3%E8%BF%9E%E6%8E%A5aria2">进入WebUI界面，通过rpc接口连接Aria2</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">参考链接:</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>

                        </div>
                 </div>
          
        </div>
        <script data-no-instant>
    (function ($) {
        $.extend({
            adamsOverload: function () {
                $.viewImage({
                    'target'  : '.post-neirong img',
                    'exclude' : '.vsmile-icons img , .song-links-item img',
                    'delay'   : 300
                });
            }
        });
    })(jQuery);
    jQuery.adamsOverload();
</script>
        <footer class="footer mdui-m-t-5 mdui-text-center">
               <nav class="social-links">
                      <ul>
                      
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                      </ul>
                    </nav>
                  <div class="copyright">
                      <p>Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a></p>
                  </div>
              </footer>
    </body>
</html>